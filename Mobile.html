<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Tennis — Mobile</title>
  <style>
    html,body{height:100%;margin:0;background:#0b0b0b;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    .host{position:relative;width:100%;height:100dvh;overflow:hidden}
    iframe{width:100%;height:100%;border:0;background:#111}
    .overlay{position:absolute;inset:0;display:none;background:rgba(0,0,0,.45);backdrop-filter:blur(6px)}
    .overlay.show{display:block}

    /* Force iframe to properly render court colors */
    #iframeBoard {
      opacity: 1;
      transform: none;
      filter: none;
      color-scheme: normal;
    }

    /* Ensure court colors are preserved on all screen sizes */
    @media (max-width: 768px) {
      #iframeBoard {
        background: transparent !important;
      }
    }

    /* Make the Registration iframe transparent when overlay is visible */
    #regOverlay.show #iframeReg {
      background: transparent !important;
    }

    /* The overlay itself applies the blur, so the court grid underneath shows through */
    #regOverlay.show {
      background: rgba(0, 0, 0, 0.4); /* tweak opacity as needed */
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }
  </style>

  <!-- ESM bootstrap (replaces all legacy IIFE scripts) -->
  <script type="module" src="/src/mobile-shell/main.js"></script>
</head>
<body>
  <main class="host">
    <iframe id="iframeBoard" src="./src/courtboard/index.html?view=mobile" title="Court Board"></iframe>
    <div id="regOverlay" class="overlay" aria-hidden="true">
      <div style="position:absolute;top:50px;right:30px;z-index:1000;">
        <button type="button" onclick="hideReg()" style="background:white;color:#374151;border:none;border-radius:50%;width:40px;height:40px;font-size:20px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.4);">✕</button>
      </div>
      <iframe id="iframeReg" src="./src/registration/index.html?view=mobile" title="Registration"></iframe>
    </div>
  </main>
</body>
</html>
