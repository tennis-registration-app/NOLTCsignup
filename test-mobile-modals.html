<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mobile Modal Test</title>
  <style>
    body { font-family: system-ui; padding: 20px; background: #000; color: #fff; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    .result { margin: 10px 0; padding: 10px; border: 1px solid #333; background: #111; }
    .success { border-color: #0f0; }
    .error { border-color: #f00; }
  </style>
</head>
<body>
  <h1>Mobile Modal Bus Test</h1>
  <p>Open in mobile view: <a href="CourtBoard.html?view=mobile" target="_blank">CourtBoard.html?view=mobile</a></p>
  
  <div class="result" id="results">
    <h3>Test Results:</h3>
    <div id="test-output"></div>
  </div>
  
  <button onclick="testModalBus()">Test Modal Bus</button>
  <button onclick="testButtons()">Test Button Handlers</button>
  
  <script>
    function log(message, type = 'info') {
      const output = document.getElementById('test-output');
      const div = document.createElement('div');
      div.style.color = type === 'success' ? '#0f0' : type === 'error' ? '#f00' : '#fff';
      div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      output.appendChild(div);
    }
    
    function testModalBus() {
      log('Testing Modal Bus...', 'info');
      
      // Test 1: Bus exists
      if (window.MobileModal) {
        log('✅ window.MobileModal exists', 'success');
      } else {
        log('❌ window.MobileModal missing', 'error');
        return;
      }
      
      // Test 2: Bus has methods
      if (typeof window.MobileModal.open === 'function') {
        log('✅ MobileModal.open is function', 'success');
      } else {
        log('❌ MobileModal.open missing or not function', 'error');
      }
      
      if (typeof window.MobileModal.close === 'function') {
        log('✅ MobileModal.close is function', 'success');
      } else {
        log('❌ MobileModal.close missing or not function', 'error');
      }
      
      // Test 3: Try opening a modal
      try {
        window.MobileModal.open('court-conditions');
        log('✅ Modal open call succeeded', 'success');
      } catch (e) {
        log(`❌ Modal open failed: ${e.message}`, 'error');
      }
    }
    
    function testButtons() {
      log('Testing Buttons...', 'info');
      
      // This needs to be run in the actual mobile view
      log('ℹ️ This test needs to be run in Mobile.html or CourtBoard.html?view=mobile', 'info');
      log('ℹ️ Open the mobile view and check console for button clicks', 'info');
    }
  </script>
</body>
</html>