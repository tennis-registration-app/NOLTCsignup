<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Court Display</title>
  <link rel="icon" href="data:,">
  <!-- Tailwind + courtboard CSS loaded via main.jsx (Vite/PostCSS build) -->
</head>

<body>

  <div id="root"></div>
  <!-- Second React root for mobile modals (isolated from main app) -->
  <div id="mobile-modal-root"></div>
  <!-- Third React root for mobile bottom bar (body level to avoid stacking contexts) -->
  <div id="mobile-bottom-bar-root"></div>

  <!-- Plain-JS fallback bar (shown only on mobile; styled by courtboard.css) -->
  <div id="mobile-bottom-bar-fallback" hidden>
    <button type="button" data-action="conditions">ğŸŒ¦ï¸<span class="lbl">Conditions</span></button>
    <button type="button" data-action="roster">ğŸ“–<span class="lbl">Roster</span></button>
    <button type="button" data-action="reserved">ğŸ›ï¸<span class="lbl">Reserved</span></button>
    <button type="button" data-action="waitlist">ğŸ‘¥<span class="lbl">Waitlist</span></button>
    <button type="button" data-action="join" disabled aria-disabled="true">ğŸ¾<span class="lbl">Join Waitlist</span></button>
  </div>

  <!--
    ============================================================
    Legacy IIFE scripts (cannot be ESM-imported)
    These are plain JS files that use window.* globals and DOM
    access at parse time. They run before main.jsx (module).
    See docs/architecture.md "Courtboard Legacy Script Exceptions"
    for classification and deletion conditions.
    ============================================================
  -->

  <!-- IIFE: sets window.APP_UTILS (storage helpers for other IIFE scripts) -->
  <script src="../../shared-utils.js"></script>

  <!-- IIFE: sets window.Tennis.UI.toast, window.IS_MOBILE_VIEW, window.MobileModal -->
  <script src="./bootstrap/courtboardPreInit.js"></script>

  <!-- IIFE: sets window.mobileTapToRegister; reads window.CourtboardState -->
  <script src="./mobile-bridge.js"></script>

  <!-- ESM: syncs waitlist promotions; reads window.Tennis.Domain.availability -->
  <script type="module" src="./sync-promotions.js"></script>

  <!-- IIFE: reads #mobile-bottom-bar-fallback, window.IS_MOBILE_VIEW, window.MobileModal -->
  <script src="./mobile-fallback-bar.js?v=5"></script>

  <!-- Vite-bundled React app (ESM entry point) -->
  <script type="module" src="./main.jsx"></script>

  <!-- IIFE: dev-only debug overlay; reads window.Tennis.Events; gated by ?debug=1 -->
  <script src="./debug-panel.js"></script>

</body>
</html>
