<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Registration - DataStore Integrated</title>
  <link rel="icon" href="data:,">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    /* Mobile-specific styles */
    @media (max-width: 640px) {
      /* Ensure modals don't exceed viewport */
      .modal-mobile-full {
        max-height: 100vh;
        max-height: 100dvh; /* Dynamic viewport height for mobile browsers */
      }
    }

    /* Very small screen button fixes */
    @media (max-width: 380px) {
      /* Force smaller buttons on very small screens */
      .bottom-nav-buttons button {
        padding-top: 0.375rem !important;    /* 6px */
        padding-bottom: 0.375rem !important; /* 6px */
        padding-left: 0.5rem !important;     /* 8px */
        padding-right: 0.5rem !important;    /* 8px */
        font-size: 0.75rem !important;       /* 12px */
      }
    }

    /* Mobile variant styles - only when ?view=mobile */
    .variant-mobile .reg-modal--mobile {
      padding: 12px;
    }

    .variant-mobile .reg-modal--mobile .input--compact {
      min-height: 44px;
      font-size: 1rem;
      padding: 10px 12px;
    }

    .variant-mobile .reg-modal--mobile .actions .btn--full {
      width: 100%;
    }

    .variant-mobile .reg-modal--mobile h2 {
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    /* Remove full-page backgrounds in mobile iframe (so parent blur shows through) */
    .variant-mobile html,
    .variant-mobile body {
      background: transparent !important;
    }

    /* Clear any page wrapper that paints gradients/solids */
    .variant-mobile .bg-gradient-to-br {
      background: transparent !important;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- Mobile View Detection -->
  <script>
    window.IS_MOBILE_VIEW =
      new URLSearchParams(location.search).get('view') === 'mobile';
    document.documentElement.classList.toggle(
      'variant-mobile',
      window.IS_MOBILE_VIEW
    );
  </script>

  <!-- Cache warm — parse localStorage JSON so the browser caches it before
       React modules load. Replaced shared-utils.js readDataSafe(); read-only. -->
  <script>
    (function() {
      try {
        var raw = localStorage.getItem('tennisClubData');
        if (raw) JSON.parse(raw);
      } catch(e) {}
    })();
  </script>

  <!-- Toast bridge (global) -->
  <script>
    window.Tennis = window.Tennis || {};
    window.Tennis.UI = window.Tennis.UI || {};
    window.Tennis.UI.toast = (msg, opts={}) =>
      window.dispatchEvent(new CustomEvent('UI_TOAST', { detail: { msg, ...opts }}));
  </script>

  <!-- File protocol warning -->
  <script>
(function () {
  if (location.protocol !== 'file:') return;

  console.warn('[dev] Loaded via file:// — this uses a different storage and won\'t receive app events.');

  function addBanner() {
    var b = document.createElement('div');
    b.style.cssText = 'position:fixed;left:0;right:0;bottom:0;padding:8px 12px;' +
                      'background:#f59e0b;color:#111;font:600 14px/1.2 system-ui;' +
                      'z-index:99999;text-align:center';
    b.textContent = '⚠️ Running from file:// — use http://127.0.0.1:5500 for correct behavior';
    document.body.appendChild(b);
  }

  if (document.body) addBanner();
  else window.addEventListener('DOMContentLoaded', addBanner, { once: true });
})();
</script>

  <!-- Vite-bundled React app -->
  <script type="module" src="./main.jsx"></script>

</body>
</html>
